---
description: Monorepo workspace patterns and conventions
alwaysApply: true
---

Bun workspace monorepo with apps/suref-web and packages/salvageunion-reference.

## Bun Workspace Best Practices

Following [Bun workspace conventions](https://bun.com/docs/guides/install/workspaces):

- Root `package.json` is `"private": true` to prevent accidental publishing
- Each package is self-contained with its own dependencies
- Workspace dependencies use `workspace:*` protocol (e.g., `"salvageunion-reference": "workspace:*"`)
- Run `bun install` from root to install dependencies for all workspaces
- Add dependencies to specific workspaces by `cd`ing into the package directory

## Package Management

- Use `bun` as package manager (not npm/yarn)
- Root scripts use `bun --filter` to target packages
- Package builds must run before app builds: `bun run build:package && bun --filter suref-web build`
- Quick dev: `bun run dev` (builds package quickly, then starts app)
- Watch mode: `bun run dev:watch` (watches package changes and app)
- Type checking: `bun run typecheck` (checks all packages)
- Linting: `bun run lint` (app only) or `bun run lint:all` (all packages)

## Workspace Packages

- `salvageunion-reference` is a workspace package imported as `salvageunion-reference`
- Always build the package before importing in the app during development
- Package exports: main entry (`./lib/index.ts`), data files (`./data/*.json`), schemas (`./schemas/*.json`)
- Workspace packages resolve automatically via Bun workspace protocol

## Import Conventions

**Prefer relative imports over path aliases:**

```ts
// ✅ Correct - use relative imports
import { useHydratedPilot } from '../../hooks/pilot'
import { supabase } from '../lib/supabase'
import { PilotWizard } from '../components/PilotWizard'

// ❌ Avoid - path aliases hide file structure
import { useHydratedPilot } from '@/hooks/pilot'
import { supabase } from '@/lib/supabase'
import { PilotWizard } from '@/components/PilotWizard'
```

- Use relative imports to make file relationships explicit
- Relative imports make it clear where files are located relative to each other
- This applies to ALL files, including route files, components, hooks, utilities, etc.

## Generated Files

- Generated files (like `routeTree.gen.ts`, `database-generated.types.ts`) are ignored in linting
